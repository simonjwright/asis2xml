ASIS2XML
========

ASIS is the Ada Semantic Interface Specification; see
<http://www.acm.org/sigada/WG/asiswg/>.

This program converts a unit's ASIS representation into XML, so as to
make it easier to develop transformational tools using (for example)
XSLT.

Licensing
---------

ASIS2XML is released under the GNU General Public Licence Version 2, a
copy of which is in the file COPYING.

Location
--------

ASIS2XML's home page is at
<http://gnat-asis.sourceforge.net/pmwiki.php/Main/ASIS2XML>.

Prerequisites
-------------

GNAT 3.15p or later (tested with GNAT GPL 2010)
The corresponding GNAT ASIS
XML/Ada 1.0 or later (tested with version 4.0 (SVN revision 164272)
from http://svn.eu.adacore.com/anonsvn/Dev/trunk/xmlada)

Building
--------

Note, many Libre tools and libraries install in $HOME/local, and the
ASIS2XML GPR and the support installation instructions below assume
this. They do assume a recent version of GNAT (in particular, 3.15p's
GPR handling will require work).

Install ASIS-for-GNAT. My procedure:
o  Unpack the distribution and enter the top-level directory.
o  $ make
o  $ make all install prefix=$HOME/local

Install XML/Ada. My procedure:
o  Unpack the distribution (or fetch from the SVN repository at
   http://svn.eu.adacore.com/anonsvn/Dev/trunk/xmlada). Enter the
   top-level directory.
o  $ ./configure --prefix=$HOME/local
o  $ make
o  $ make install

Build ASIS2XML.
o  Unpack the distribution (or fetch from the SVN repository at
   https://gnat-asis.svn.sourceforge.net/svnroot/gnat-asis/trunk/tools/asis2xml).
   Enter the top-level directory.
o  $ make
o  Copy asis2xml[.exe] to somewhere on your path (perhaps $HOME/local/bin).

Installation
------------

Copy asis2xml to a directory on your path.

Use
---

asis2xml will accept a tree file (.adt), or a directory which is a
GNAT object directory containing a set of .adt files. The GNAT ASIS
implementation doesn't understand Project files, so if you have any
sort of complex path setup the way to go is to generate the tree files
using the Project:

  $ gnatmake -Pbuild -c -f -gnatct example.ads

creates example.adt in your project (build.gpr)'s Object_Dir -- in the
case of asis2xml's asis2xml.gpr, this is ./.build.

  $ asis2xml .build/example.adt >example.xml

The output is in "packed" XML; to get a more legible view, you can
use HTML Tidy from http://tidy.sourceforge.net/:

  $ asis2xml .build/example.adt | tidy -xml -i >example.tidy.xml

or variations.

Options
-------

asis2xml supports one flag (well, two if you count -h for help):

  -s reports the stream size (in bits) required by record components.

For example,

  type C is range 0 .. 255;
  type R is record
     Ch : Character;
     Cc : C;
     Lf : Long_Float;
  end record;

results in

  <ordinary_type_declaration>
    <defining_identifier>R</defining_identifier>
    <type_definition>
      <record_type_definition></record_type_definition>
      <record_definition>
        <component_declaration>
          <defining_identifier>Ch</defining_identifier>
          <component_definition size="8">
            <subtype_indication>
              <identifier>Character</identifier>
            </subtype_indication>
          </component_definition>
        </component_declaration>
        <component_declaration>
          <defining_identifier>Cc</defining_identifier>
          <component_definition size="16">
            <subtype_indication>
              <identifier>C</identifier>
            </subtype_indication>
          </component_definition>
        </component_declaration>
        <component_declaration>
          <defining_identifier>Lf</defining_identifier>
          <component_definition size="64">
            <subtype_indication>
              <identifier>Long_Float</identifier>
            </subtype_indication>
          </component_definition>
        </component_declaration>
      </record_definition>
    </type_definition>
  </ordinary_type_declaration>

===
Simon Wright, <simon@pushface.org>
$Id$
